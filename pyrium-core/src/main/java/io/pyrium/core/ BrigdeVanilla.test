//this was only a test. the java class is now named BridgeServer.
package io.pyrium.core;

import org.bukkit.Bukkit;
import org.bukkit.plugin.Plugin;
import org.bukkit.scheduler.BukkitTask;

public final class BridgeVanilla {

  private static BukkitTask tickTask;

  public static void install(Plugin plugin) {
    
    if (tickTask != null && !tickTask.isCancelled()) {
      tickTask.cancel();
    }

    // Native Paper/Vanilla Tick-Hook: lÃ¤uft exakt einmal pro Server-Tick
    tickTask = Bukkit.getScheduler().runTaskTimer(
        plugin,
        () -> {
          // trigger EventBus tick
          EventBus.dispatchTick();
        },
        1L, 
        1L  // reapeat every tick

    System.out.println("[Pyrium] Vanilla bridge installed (native tick active).");
  }
}
